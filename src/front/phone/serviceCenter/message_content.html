<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">

<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="../build/css/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../build/css/ui-box.css">
    <link rel="stylesheet" href="../build/css/ui-base.css">
    <link rel="stylesheet" href="../build/css/ui-color.css">
    <link rel="stylesheet" href="../build/css/appcan.icon.css">
    <link rel="stylesheet" href="../build/css/appcan.control.css">
</head>

<body class="um-vp bc-bg" ontouchstart>
    <div class="white-bg mf-size1 b-border">
        <div class="ub m-row umar-l umar-r">
            <div class="ub ub-ac uw-reg ">
                <span>公司名称</span>
            </div>
            <div class="ub ub-ac ub-f1">
                <div class="umar-l uinput ub ub-f1">
                    <input placeholder="请输入公司名称" type="text" class="" id="username">
                </div>
            </div>
        </div>
        <div class="ub m-row umar-l umar-r">
            <div class="ub ub-ac uw-reg ulev-app1">
                联系方式
            </div>
            <div class="ub ub-ac ub-f1">
                <div class="umar-l uinput ub ub-f1">
                    <input placeholder="请输入联系方式" type="number" class="ub-f1" id="password">
                </div>
            </div>
        </div>

        <div class="ub ub-ver white-bg">
            <div id="" class="m-row2">
                留言内容
            </div>
            <div class="umar-l umar-b">
                <textarea class="m-textarea" oninput="" onpropertychange=""></textarea>
            </div>
        </div>
    </div>


    <div class="umar-a margin-t-l">
        <div class="btn ub ub-ac bc-text-head ub-pc bc-btn mp-btn" id="btn-save-msg">
            提&nbsp; &nbsp;交
        </div>
    </div>
    <script src="../build/js/appcan.js"></script>
    <script src="../build/js/appcan.control.js"></script>
    <script src="../common/comm.js"></script>
</body>
<script>
    appcan.ready(function () {});

    appcan.button("#btn-save-msg", "btn-act", function () {
        var senderName = $("input")[0].value;
        if (senderName == "") {
            uexWindow.alert("提示", "请填写公司名称", "确定");
            return;
        }
        var phone = $("input")[1].value;
        if (phone == "") {
            uexWindow.alert("提示", "请填写联系方式", "确定");
            return;
        }
        var myreg = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
        if (!myreg.test(phone)) {
            uexWindow.alert("提示", "请输入有效的手机号码!", "确定");
            return;
        }

        var content = $("textarea")[0].value;
        if (content == "") {
            uexWindow.alert("提示", "请填写留言内容", "确定");
            return;
        }
        var param = "senderName=" + senderName + "&phone=" + phone + "&email=&contAddress=&inqContent=" +
            content + "&code=";

        var url = URL + "/app/msgMng/addMsg";
        var paramJsonStr = param;
        var func = addMsgCallBack;
        var dataType = "text";
        ajaxPostQuery(url, paramJsonStr, func, dataType);
        appcan.window.openToast('正在提交...', '0', '5', '1');
    })

    function addMsgCallBack(data) {
        appcan.window.closeToast();
        if (data == "0") {
            appcan.window.alert({
                title: "提示",
                content: "留言已提交成功!",
                buttons: ['确定'],
                callback: function (err, data, dataType, optId) {
                    uexWindow.evaluateScript("message", 0, "closeCurPage()");
                }
            });
        } else {
            appcan.window.openToast({
                msg: '提交失败，请重试',
                duration: 1000,
                position: 5,
                type: 0
            });
        }
    }
</script>

</html>