<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <!--标准mui.css-->
        <link rel="stylesheet" href="./css/mui.css">
        <link rel="stylesheet" type="text/css" href="./css/mui.picker.min.css" />
        <link rel="stylesheet" type="text/css" href="./css/app.css"/>
    </head>
    <body>

        <div class="mui-content">

            <h5 class="mui-content-padded">自定义数据</h5>
            <button id='demo7' class="btn mui-btn mui-btn-block">
                选择时段 ...
            </button>
            <div id='result' class="ui-alert"></div>
        </div>
      

    </body>
    <script src="./js/mui.min.js"></script>
    <script src="./js/mui.picker.all.js"></script>
    <script src="../../common/comm.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        (function($) {
            $.init();
            var result = $('#result')[0];
            var btns = $('.btn');
            btns.each(function(i, btn) {
                btn.addEventListener('tap', function() {
                    var _self = this;
                    if (_self.picker) {
                        _self.picker.show(function(rs) {
                            result.innerText = '选择结果: ' + rs.text;
                            _self.picker.dispose();
                            _self.picker = null;
                        });
                    } else {
                       var date = new Date().formate("yyyy-MM-dd"),
                            y = date.split("-")[0],
                            m = Number(date.split("-")[1]),
                            d = Number(date.split("-")[2]);

                        var thisMonthDay = mGetDate(y, m),
                            continuedDays = 7,
                            maxDay = d + continuedDays > thisMonthDay ? d + continuedDays - thisMonthDay : Number(d) + continuedDays,
                            minMonth = m - 1,
                            maxMonth = d+continuedDays>thisMonthDay?minMonth+1:minMonth;


                        var options = {
                            type : "hour", //设置日历初始视图模式
                             beginDate : new Date(y, minMonth, d), //设置开始日期
                            endDate : new Date(y, maxMonth, maxDay), //设置结束日期
                            labels : ["年", "月", "日", "时段", "分"], //设置默认标签区域提示语
                            customData : {
                                h : [{
                                    "text" : "上午",
                                    "value" : "上午"
                                }, {
                                    "text" : "下午",
                                    "value" : "下午"
                                }, {
                                    "text" : "晚上",
                                    "value" : "晚上"
                                }]
                            }//时间/日期别名
                        }
                        var id = this.getAttribute('id');

                        _self.picker = new $.DtPicker(options);
                        _self.picker.show(function(rs) {

                            result.innerText = '选择结果: ' + rs.text;
                            var chooseDate = (rs.text).split(" ")[0];
                            var chooseTime = (rs.text).split(" ")[1];

                            _self.picker.dispose();
                            _self.picker = null;
                        });
                    }

                }, false);
            });
        })(mui);
    </script>

</html>