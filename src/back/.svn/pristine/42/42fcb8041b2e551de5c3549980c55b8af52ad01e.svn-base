<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">

<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="../build/css/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../build/css/ui-box.css">
    <link rel="stylesheet" href="../build/css/ui-base.css">
    <link rel="stylesheet" href="../build/css/ui-color.css">
    <link rel="stylesheet" href="../build/css/appcan.icon.css">
    <link rel="stylesheet" href="../build/css/appcan.control.css">
    <link rel="stylesheet" type="text/css" href="../build/css/order.css" />
</head>

<body id="nodata" class="bc-bg ub-f1 tx-l umar-t content-info" ontouchstart>
    <div id="content" class="fs08">

    </div>

</body>

<script type="text/html" charset="utf-8" id="html">
        {{each list}}
        <div class="list">
        <div class="list-item ub">
        <div class="w5 ub ub-f1 ub-ac">
        <span class="gray-font">付油通知单编码：</span>
        <span id="">
        {{$value.noticeCode}}
        </span>
        </div>

        <span class="gary-font psztb">
        {{if $value.extractType==1}}
        自提
        {{else}}
        配送
        {{/if}}
        </span>
        </div>

        <div class="list-item cf">
        <div class="left">
        {{$value.oilinfoName}} <span></span> <span class="price">￥{{if $value.oilPrice =='0'}}-{{else}}{{$value.oilPrice}}{{/if}}</span><span class="gray-font">元</span>
        <span> &nbsp;x {{if $value.oilNumber <0}}
        0
        {{else}}
        {{$value.oilNumber}}
        {{/if}}</span><span class="gray-font">吨</span>
        </div>
        <div class="right">
        <span class="gray-font">
        共&nbsp;
        </span><span class="price">{{if $value.oilAmot=='0'}}--{{else}}{{$value.oilAmot}}{{/if}}</span>
        <span class="gray-font mf-size2 umar-l">元</span>
        </div>

        </div>

        <div class="list-item">
        <span class="gray-font">
        状态：
        </span><span>{{if $value.state == 5}}
        已出库
        {{/if}}</span><span class="gray-font"></span>
        </div>

        <div class="list-item">
        <span class="gray-font">
        销售单位：
        </span>
        <span>{{$value.orgName}}</span>
        </div>

        <div class="list-item">
        <span class="gray-font">
        发货单位：
        </span>
        <span>{{$value.cusCompany}}</span>
        </div>

        <div class="list-item">
        <span class="gray-font">
        创建时间：
        </span>
        <span>{{$value.createDate}}</span>
        </div>

        </div>
        <div class="kong"></div>
        {{/each}}
    </script>
<script src="../build/js/appcan.js"></script>
<script src="../build/js/appcan.control.js"></script>
<script src="../common/template-web.js" type="text/javascript" charset="utf-8"></script>
<script src="../common/common.js"></script>
<script src="../common/jquery.min.js"></script>

</body>
<script>
    // 当所有组件准备好后执行内部回调方法
    appcan.ready(function () {

        uexWindow.setWindowScrollbarVisible('false');

        appcan.frame.setBounce(1, function (type) {
            $("#pullstatus").html("");
        }, function (type) {
            $("#pullstatus").html("");
        }, function (type) {
            $("#pullstatus").html("松手了,产生事件了,开始更新数据！");
            // 下拉事件发生
            appcan.frame.resetBounce(1);
            // 当前总条数
            var num = Number(pageNo) * limit;

            $("#pullstatus").html("");
            // alert("totalRows=" + totalRows)

            if (Number(totalRows) <= num) {
                appcan.window.openToast({
                    msg: '没有更多',
                    duration: 1000,
                    position: 5,
                    type: 0
                });
                return;
            }

            newPageNo = Number(pageNo) + 1;

            alert('准备加载第' + newPageNo + '页')

            Orders.queryMentOilOrder(newPageNo);
        });
        mentionOil.init();

    });

    var mentionOil = {
        init: function () {
            var yue = this;
            yue.queryMentOilOrder();
        },
        queryMentOilOrder: function (newPageNo) {
            var pageNo = newPageNo ? newPageNo : 1;
            var orgId = appcan.locStorage.getVal("orgId")
            var yue = this;
            var paramJsonStr = "&pager.pageNo=" + pageNo + "&pager.pageSize=" + pageSize;
            var func = yue.showOrderCallback.bind(yue);

            ajaxPostQuery(URL + "/app/oil/send/selectSendList", paramJsonStr, func, "text");
            appcan.window.openToast('加载中...', '0', '5', '1');
        },
        showOrderCallback: function (data) {
            appcan.window.closeToast();
            var data = JSON.parse(data);
            console.log(data)
            var ahtml = template('html', {
                list: data.rows
            });
            $('#content').append(ahtml);
        }
    }


    function BtnClick(noticeSubId) {
        appcan.locStorage.setVal("orderId", noticeSubId);
        appcan.window.open("detail", "mentionOil_detail.html", 10);
    }

</script>

</html>