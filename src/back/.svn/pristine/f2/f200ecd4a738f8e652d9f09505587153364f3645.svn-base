<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../css/ui-box.css">
        <link rel="stylesheet" href="../css/ui-base.css">
        <link rel="stylesheet" href="../css/ui-color.css">
        <link rel="stylesheet" href="../css/appcan.control.css">
        <link rel="stylesheet" href="css/intention.css"/>
    </head>
    <body class="pop-body" ontouchstart>

       <div class="pop-wrapper">
            <div class="pop-content">
                <div class="pop-info">
                                                        单价：<input type="text" id="oilPrice" style="width:5em;height: 2em;margin-right: 0.2em"/>元
                </div>
                <div class="pop-info">
                                                        数量：<input type="text" id="oilNumber" style="width:5em;height: 2em;margin-right: 0.2em"/>吨
                </div>

                <div id="btn" class="ub ub-ac">
                    <div id="confirmBtn" class="uinn5 ubt ubr bc-border ub ub-f1 ub-pc">
                         <span class="mf-color">确认</span>
                    </div>
                    <div id="cancelBtn" class="uinn5 ubt bc-border ub ub-f1 ub-pc">
                       <span class="mf-color">关闭</span>
                    </div>
                </div>
            </div>
        </div>

        <script src="../js/appcan.js"></script>
        <script src="../js/appcan.control.js"></script>
        <script src="../common/common.js"></script>
    </body>
    <script>
        appcan.ready(function() {
            var oilNumber = appcan.locStorage.getVal("oilNumber");
            var oilPrice = appcan.locStorage.getVal("oilPrice");
            $("#oilNumber").val(oilNumber);
            $("#oilPrice").val(oilPrice);
            appcan.initBounce();
        })

        function reasonChange(){
             var reason = $("textarea")[0].value;
        }
        
        appcan.button("#confirmBtn", "act-ani", function(){
            var orderId = appcan.locStorage.getVal("orderId_edit");
            var orderSubId = appcan.locStorage.getVal("orderSubId_edit");
            var payType_orderId = appcan.locStorage.getVal("payType_orderId");
            var oilNumber = $("#oilNumber").val();
            var oilPrice = $("#oilPrice").val();
            
            if(isNaN(Number(oilPrice)) || Number(oilPrice)<=0){
                appcan.window.openToast('单价输入错误', '1000', '5', '0');
                return;
            }
            if(isNaN(Number(oilNumber)) || Number(oilNumber)<=0){
                appcan.window.openToast('数量输入错误', '1000', '5', '0');
                return;
            }
            
            
            var oils = orderSubId+"★"+oilPrice+"★"+oilNumber;
            var url = URL + "/app/backgrd/bill/updateOrder";
            var paramJsonStr = "orderId="+orderId+"&oils="+oils+"&payType_"+orderId+"="+payType_orderId+"&orderSubId="+orderSubId;
            var func = cancelOrderByEmpCallBack;
            var dataType = "text";
            ajaxPostQuery(url, paramJsonStr, func, dataType);
        })
        function cancelOrderByEmpCallBack(data){
            if(data=="ok"){
                uexWindow.evaluateScript("toconfirm", 0, "reload()");
                closepop();
            }else{
                
            }
        }
        
        appcan.button("#cancelBtn", "act-ani", function(){
            closepop();
        })
        
        //关闭浮动窗口
        function closepop() {
            appcan.closePopover("editIntention");
        }
        

    </script>
</html>