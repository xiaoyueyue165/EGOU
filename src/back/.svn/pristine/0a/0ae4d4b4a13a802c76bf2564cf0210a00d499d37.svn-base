<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">

<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="../build/css/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../build/css/ui-box.css">
    <link rel="stylesheet" href="../build/css/ui-base.css">
    <link rel="stylesheet" href="../build/css/ui-color.css">
    <link rel="stylesheet" href="../build/css/appcan.icon.css">
    <link rel="stylesheet" href="../build/css/appcan.control.css">
    <link rel="stylesheet" href="css/manager.css">
    <script src="../common/common.js"></script>
    <style>
        .w25 {
            width: 25%;
        }

        .w50 {
            width: 50%;
        }
    </style>
</head>

<body class="um-vp bc-bg ub-ver" ontouchstart>
    <div class="ub ub-pj item-height1 sc-bg mf-size1" id="">
        <div class="umar-a">
            <div id="empName"></div>
            <div id="orgName" class="umar-t"></div>
        </div>
        <div class="ub uinn3">
            <div class="ub ub-ac ub-pc mf-size2" id="logout">
                注销
                <span id="" class="fa fa-angle-right"> </span>
            </div>
        </div>
    </div>

    <div class="gap" id=""></div>

    <div class="item-height-intention sc-bg">
        <div id="listview" class="sc-bg m-list"></div>
        <div class="ub ub-ac ub-pc padding-a1 controlBox">
            <div id="0" class="ub ub-ver ub-ac w25" onclick="viewDD(id)">
                <div class="ui-s-state1 state1-tbd"></div>
                <div class="mf-size2">
                    审核订单
                </div>
            </div>
            <div id="1" class="quanzi ub ub-ver ub-ac w25" onclick="viewDD(id)">
                <div class="ui-s-state1 state1-pay"></div>
                <div class="mf-size2">
                    销售结算
                </div>
            </div>

            <div id="3" class="ub ub-ver ub-ac w25" onclick="viewDD(id)">
                <div class="ui-s-state1 state1-cancel"></div>
                <div class="mf-size2">
                    配送自提
                </div>
            </div>
            <div id="2" class="quanzi ub ub-ver ub-ac w25" style="visibility: hidden;">
                <div class="ui-s-state1 state1-exchange"></div>
                <div class="mf-size2">
                    &nbsp;&nbsp;
                </div>
            </div>
        </div>

    </div>

    <div class="gap" style="position: relative;top: -1px"></div>

    <div class="ub ub-ver sc-bg" id="">
        <div id="searchOrders"></div>

    </div>
    <div class="gap" id=""></div>

    <div class="item-height-intention sc-bg">
        <div id="others" class="sc-bg m-list"></div>
        <div class="ub ub-ac ub-pc padding-a1">
            <div id="0" class="ub ub-ver ub-ac w25" onclick="othersFeatures(id)">
                <div class="ui-s-state1 state1-tbd"></div>
                <div class="mf-size2">
                    修改密码
                </div>
            </div>
            <div id="1" class="ub ub-ver ub-ac w25" onclick="othersFeatures(id)" style="visibility: hidden">
                <div class="ui-s-state1 state1-pay"></div>
                <div class="mf-size2">
                    other1
                </div>
            </div>
            <div id="2" class="ub ub-ver ub-ac w25" onclick="othersFeatures(id)" style="visibility: hidden">
                <div class="ui-s-state1 state1-exchange"></div>
                <div class="mf-size2">
                    other2
                </div>
            </div>
            <div id="3" class="ub ub-ver ub-ac w25" onclick="othersFeatures(id)" style="visibility: hidden">
                <div class="ui-s-state1 state1-cancel"></div>
                <div class="mf-size2">
                    other3
                </div>
            </div>

        </div>

    </div>

    <script src="../build/js/appcan.js"></script>
    <script src="../build/js/appcan.control.js"></script>
    <script src="../build/js/appcan.listview.js"></script>
    <script src="../common/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../common/template-web.js" type="text/javascript" charset="utf-8"></script>
    <script id="html" type="text/html">
        {{each list}} {{if $value.type=='全资'}}

        <div class="ub ub-ac umar-l padding-a mf-size2">
            单据查询
            <div class="tx-r sc-text ulev-1 umar-r lv_subTitle">全部订单</div>
            <div class="fa fa-angle-right ulev2 sc-text"></div>
        </div>
        <div class="ub ubt  bc-border ub-ac padding-a1">
            <div id="11" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-delivery"></div>
                <div class="mf-size2">
                    订单查询
                </div>
                
            </div>
            <div id="12" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    销售结算
                </div>
            </div>
            <div id="13" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    付油通知单
                </div>
            </div>
            <div id="14" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-trace"></div>
                <div class="mf-size2">
                    配送自提
                </div>
            </div>

        </div>

        <div class="ub ubt  bc-border ub-ac padding-a1">
            <div id="15" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    客存查询
                </div>
            </div>

            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    订单汇总
                </div>
            </div>
            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)" style="visibility: hidden">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    空空空空空空
                </div>
            </div>
            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)" style="visibility: hidden">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    空空空空空空
                </div>
            </div>
        </div>

        {{else}}
        <div id="listview" class="sc-bg m-list">
            <ul>
                <li class="ub bc-border bc-text ub-ac lis" id="1" data-index="0">
                    <div class="lv_title ub-f1 marg-l ub ub-ver ut-m line1">
                        <div class="ub ub-ac padding-a mf-size2">单据查询</div>
                    </div>
                    <div class="tx-r sc-text ulev-1 umar-r lv_subTitle">查询单据</div>
                    <div class="fa fa-angle-right ulev2 sc-text"></div>
                </li>
            </ul>
        </div>
        <div class="ub ubt  bc-border ub-ac padding-a1">
            <div id="0" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-delivery"></div>
                <div class="mf-size2">
                    订单查询
                </div>
            </div>
            <div id="1" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    销售结算
                </div>
            </div>
            <div id="3" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-trace"></div>
                <div class="mf-size2">
                    配送自提
                </div>
            </div>

            <div id="4" class="ub ub-ver ub-ac w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    客存查询
                </div>
            </div>

        </div>

        <div class="ub ubt  bc-border ub-ac padding-a1">

            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    订单汇总
                </div>
            </div>
            <div id="6" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    结算统计
                </div>
            </div>
            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)" style="visibility: hidden">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    空空空空空
                </div>
            </div>
            <div id="5" class="ub ub-ver ub-ac ub-pc w25" onclick="search(id)" style="visibility: hidden">
                <div class="ui-s-state state-order"></div>
                <div class="mf-size2">
                    空空空空
                </div>
            </div>
        </div>


        {{/if}} {{/each}}
    </script>
</body>
<script>
    searchLayout();
    var empName = "";
    var orgName = "";
    appcan.ready(function () {
        var orgInfo = appcan.locStorage.getVal("orgInfo");
        orgInfo = JSON.parse(orgInfo);
        empName = orgInfo.empName;
        orgName = orgInfo.orgName;
        $("#empName")[0].innerHTML = empName;
        $("#orgName")[0].innerHTML = orgName;
    });

    var lv_yx = appcan.listview({
        selector: "#listview",
        type: "thinLine",
        hasIcon: false,
        hasAngle: true,
        hasSubTitle: true,
        multiLine: 1,
    });
    lv_yx.set([{
        title: " <div class='ub ub-ac padding-a mf-size2'>审核管理</div>",
        subTitle: "全部订单",
        id: "1"
    }])
    lv_yx.on("click", function (ele, obj, curEle) {
        appcan.window.open("intention", "../intention/intention.html", 10);
    })

    var others = appcan.listview({
        selector: "#others",
        type: "thinLine",
        hasIcon: false,
        hasAngle: true,
        hasSubTitle: true,
        multiLine: 1,
    });
    others.set([{
        title: " <div class='ub ub-ac padding-a mf-size2'>其他功能</div>",
        subTitle: "查看更多",
        id: "1"
    }])
    others.on("click", function (ele, obj, curEle) {
        // appcan.window.open("intention", "../intention/intention.html", 10);
    })

    // 订单管理
    function viewDD(id) {
        switch (id) {
            case "0":
                // 审核订单
                appcan.window.open("toConfirm", "../intention/toConfirm.html", 10);
                // appcan.window.open("toAudit", "../intention/toAudit.html", 10);
                break;
                // 确认订单
            case "1":
                appcan.window.open("toTransferOil", "../intention/toTransferOil.html", 10);
                break;
            case "2":
                break;
            case "3":
                // 配送自提
                appcan.window.open("pszt", "../intention/pszt.html", 10);
                break;
        }
    }

    // 单据查询
    function search(id) {
        switch (id) {
            case "0":

                //------------------ 合资查询
                // 订单查询
                appcan.window.open("search", "../search/order.html", 10);
                break;
            case "1":
                // 结算单查询
                appcan.window.open("cus", "../search/jiesuan.html", 10);
                break;
            case "3":
                // 配送自提
                appcan.window.open("cus", "../search/pszt.html", 10);
                break;

            case "4":
                // 客存查询
                appcan.window.open("cus", "../search/kecun.html", 10);
                break;
                // 订单汇总
            case "5":
                appcan.window.open("search", "../search/huizong.html", 10);
                break;
                // 结算统计
            case "6":
                appcan.window.open("jiesuan_statistics", "../search/jiesuan_statistics.html", 10);
                break;

                // --------------------全资查询
            case "11":
                //订单查询
                appcan.window.open("search", "../search/order.html", 10);
                break;
            case "12":
                // 销售结算查询
                appcan.window.open("cus", "../search/jiesuan.html", 10);
                break;
                // 付油通知单
            case "13":
                appcan.window.open("cus", "../search/pszt.html", 10);
                break;
                // 配送自提
            case "14":
                appcan.window.open("cus", "../search/pszt.html", 10);
                break;

                // 客存查询
            case "15":
                appcan.window.open("cus", "../search/pszt.html", 10);
                break;

        }
    }

    function othersFeatures(id) {

        switch (id) {
            case "0":

                //------------------ 合资查询
                // 订单查询
                appcan.window.open("search", "./changePwd.html", 10);
                break;
        }
    }

    function openpage(id) {
        if (id) {
            appcan.window.alert({
                title: "提示",
                content: "该功能模块暂时未开通,敬请期待",
                buttons: ['我支持'],
                callback: function (err, data, dataType, optId) {

                    console.log(err, data, dataType, optId);
                }
            });
        }
    }


    appcan.button("#logout", "btn-act", function () {
        var url = URL + "/app/admin/loginout";
        var paramJsonStr = "";
        var func = logoutCallback;
        var dataType = "text";
        ajaxPostQuery(url, paramJsonStr, func, dataType);
        appcan.window.openToast('加载中...', '0', '5', '1');
    })

    function logoutCallback(data) {
        appcan.window.closeToast();
        if (data == "ok") {
            appcan.locStorage.remove("sid");
            appcan.locStorage.setVal("status", "out");
            uexWindow.evaluateScript("manager", 0, "openindex()");
        } else {

        }
    }

    function searchLayout() {
        var box = document.getElementById("searchOrders");
        var companyType = appcan.locStorage.getVal("companyType");
        var username = appcan.locStorage.getVal("username");
        if (companyType == '合资' || companyType == "总部" || companyType == "全资" || username=="zhouguodong0") {

            // 合资  查询，销售结算  配送自提
            var obj = {
                companyType: {
                    type: companyType
                }
            };
            console.log(obj)
            var html = template('html', {
                list: obj
            })
            box.innerHTML = html;
        }
        if (companyType == "全资") {
            $(".quanzi").remove();
            $('.controlBox').append('<div class="ub ub-ver ub-ac w50">&nbsp;</div>')
        }
    }
</script>

</html>